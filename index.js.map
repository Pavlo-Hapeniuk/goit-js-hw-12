{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport async function getImagesByQuery(query, currentPage) {\n  const API_KEY = '53374689-de9604de74fdd47daed383deb';\n\n  try {\n    const res = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 15,\n      },\n    });\n\n    if (!res.data.hits || res.data.hits.length === 0) {\n      iziToast.info({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n        timeout: 3000,\n      });\n      return [];\n    }\n    return res.data.hits;\n  } catch {\n    iziToast.error({\n      message: `Something went wrong. Please try again later.`,\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      timeout: 4000,\n    });\n    return [];\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst simplelightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 500,\n});\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nfunction cardTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `     \n      <li class=\"gallery-card\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery-image\" />\n        </a>\n        <div class=\"gallery-stats\">\n          <p><strong>Likes</strong> <span class=\"likes\">${likes}</span></p>\n          <p><strong>Views</strong> <span class=\"views\">${views}</span></p>\n          <p><strong>Comments</strong> <span class=\"comments\">${comments}</span></p>\n          <p><strong>Downloads</strong> <span class=\"downloads\">${downloads}</span></p>\n        </div>\n      </li>`;\n}\n\nfunction cardsTemplate(cards) {\n  return cards.map(cardTemplate).join('');\n}\n\nexport function createGallery(cards, replace = false) {\n  if (replace) {\n    gallery.innerHTML = cardsTemplate(cards);\n  } else {\n    gallery.insertAdjacentHTML('beforeend', cardsTemplate(cards));\n  }\n\n  simplelightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  if (loader) loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  if (loader) loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {}\n\nexport function hideLoadMoreButton() {}\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\n\nconst formElem = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.js-btn-load');\n\nlet searchText;\nlet currentPage;\n\nformElem.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const formData = new FormData(e.target);\n  searchText = formData.get('search-text').trim();\n  currentPage = 1;\n\n  if (!searchText) {\n    iziToast.warning({\n      message: `Please, enter something!`,\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery();\n  showLoader();\n\n  try {\n    const hits = await getImagesByQuery(searchText, currentPage);\n    await createGallery(hits, true);\n  } catch {\n    iziToast.error({\n      message: `Error! Please try again!`,\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n\n  e.target.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n\n  showLoader();\n\n  try {\n    const hits = await getImagesByQuery(searchText, currentPage);\n    await createGallery(hits, false);\n  } catch {\n    iziToast.error({\n      message: `Error! Please try again!`,\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["getImagesByQuery","query","currentPage","API_KEY","res","axios","iziToast","simplelightbox","SimpleLightbox","gallery","loader","cardTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","cardsTemplate","cards","createGallery","replace","clearGallery","showLoader","hideLoader","formElem","loadMoreBtn","searchText","e","hits"],"mappings":"+vBAKO,eAAeA,EAAiBC,EAAOC,EAAa,CACzD,MAAMC,EAAU,qCAEhB,GAAI,CACF,MAAMC,EAAM,MAAMC,EAAM,IAAI,2BAA4B,CACtD,OAAQ,CACN,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,EAED,MAAI,CAACE,EAAI,KAAK,MAAQA,EAAI,KAAK,KAAK,SAAW,GAC7CE,EAAS,KAAK,CACZ,QAAS,2EACT,gBAAiB,UACjB,SAAU,WACV,QAAS,GACjB,CAAO,EACM,IAEFF,EAAI,KAAK,IACpB,MAAU,CACN,OAAAE,EAAS,MAAM,CACb,QAAS,gDACT,gBAAiB,UACjB,SAAU,WACV,QAAS,GACf,CAAK,EACM,EACR,CACH,CCrCA,MAAMC,EAAiB,IAAIC,EAAe,gBAAiB,CACzD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEKC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/C,SAASC,EAAa,CACpB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA,mBAEUL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,0DAGUC,CAAK;AAAA,0DACLC,CAAK;AAAA,gEACCC,CAAQ;AAAA,kEACNC,CAAS;AAAA;AAAA,YAG3E,CAEA,SAASC,EAAcC,EAAO,CAC5B,OAAOA,EAAM,IAAIT,CAAY,EAAE,KAAK,EAAE,CACxC,CAEO,SAASU,EAAcD,EAAOE,EAAU,GAAO,CAChDA,EACFb,EAAQ,UAAYU,EAAcC,CAAK,EAEvCX,EAAQ,mBAAmB,YAAaU,EAAcC,CAAK,CAAC,EAG9Db,EAAe,QAAO,CACxB,CAEO,SAASgB,GAAe,CAC7Bd,EAAQ,UAAY,EACtB,CAEO,SAASe,GAAa,CACvBd,IAAQA,EAAO,MAAM,QAAU,QACrC,CAEO,SAASe,GAAa,CACvBf,IAAQA,EAAO,MAAM,QAAU,OACrC,CChDA,MAAMgB,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAc,SAAS,cAAc,cAAc,EAEzD,IAAIC,EACA1B,EAEJwB,EAAS,iBAAiB,SAAU,MAAMG,GAAK,CAO7C,GANAA,EAAE,eAAc,EAGhBD,EADiB,IAAI,SAASC,EAAE,MAAM,EAChB,IAAI,aAAa,EAAE,KAAI,EAC7C3B,EAAc,EAEV,CAAC0B,EAAY,CACftB,EAAS,QAAQ,CACf,QAAS,2BACT,gBAAiB,UACjB,SAAU,UAChB,CAAK,EACD,MACD,CAEDiB,IACAC,IAEA,GAAI,CACF,MAAMM,EAAO,MAAM9B,EAAiB4B,EAAY1B,CAAW,EAC3D,MAAMmB,EAAcS,EAAM,EAAI,CAClC,MAAU,CACNxB,EAAS,MAAM,CACb,QAAS,2BACT,gBAAiB,UACjB,SAAU,UAChB,CAAK,CACL,QAAY,CACRmB,GACD,CAEDI,EAAE,OAAO,OACX,CAAC,EAEDF,EAAY,iBAAiB,QAAS,SAAY,CAChDzB,GAAe,EAEfsB,IAEA,GAAI,CACF,MAAMM,EAAO,MAAM9B,EAAiB4B,EAAY1B,CAAW,EAC3D,MAAMmB,EAAcS,EAAM,EAAK,CACnC,MAAU,CACNxB,EAAS,MAAM,CACb,QAAS,2BACT,gBAAiB,UACjB,SAAU,UAChB,CAAK,CACL,QAAY,CACRmB,GACD,CACH,CAAC"}